<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orthogonal Trajectory Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: white;
            color: #333;
            line-height: 1.6;
        }
        
        /* Header Styles */
        header {
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
            padding: 1.5rem 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .header-top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo i {
            font-size: 2.2rem;
            margin-right: 0.8rem;
            color: #6dd5ed;
        }
        
        .logo-text h1 {
            font-size: 2.2rem;
            font-weight: 700;
            color: black;
            text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
        }
        
        .logo-text p {
            font-size: 0.9rem;
            color: #e0e0e0;
        }
        
        .contact-issue {
            display: flex;
            gap: 1rem;
        }
        
        .contact-btn, .issue-btn {
            padding: 0.6rem 1.2rem;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
        }
        
        .contact-btn {
            background-color: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .issue-btn {
            background-color: #ff6b6b;
            color: white;
        }
        
        .contact-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .issue-btn:hover {
            background-color: #ff5252;
        }
        
        /* Hero Section */
        .hero {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 3rem 2rem;
            background-color: white;
            border-bottom: 1px solid #eee;
        }
        
        .hero-content {
            flex: 1;
            max-width: 600px;
        }
        
        .hero-content h2 {
            font-size: 2.5rem;
            color: #182848;
            margin-bottom: 1rem;
            line-height: 1.2;
        }
        
        .hero-content p {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 2rem;
        }
        
        .hero-image {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .math-img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }
        
        /* Input Section */
        .input-section {
            padding: 2rem;
            background-color: #f9f9f9;
            border-radius: 10px;
            margin: 2rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            color: #182848;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #4b6cb7;
        }
        
        .equation-input-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .input-group label {
            font-weight: 600;
            color: #333;
        }
        
        .input-group input {
            padding: 0.8rem 1rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .input-group input:focus {
            border-color: #4b6cb7;
            outline: none;
            box-shadow: 0 0 0 2px rgba(75, 108, 183, 0.2);
        }
        
        .examples {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.3rem;
        }
        
        .submit-btn {
            background: linear-gradient(to right, #4b6cb7, #182848);
            color: white;
            border: none;
            padding: 0.9rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.3s ease;
            align-self: flex-start;
            margin-top: 1rem;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(75, 108, 183, 0.4);
        }
        
        /* Backend Page */
        .backend-page {
            padding: 2rem;
            display: none;
        }
        
        .back-btn {
            background-color: #6c757d;
            color: white;
            border: none;
            padding: 0.7rem 1.5rem;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 1.5rem;
            font-weight: 600;
            transition: background-color 0.3s;
        }
        
        .back-btn:hover {
            background-color: #5a6268;
        }
        
        .solution-blocks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .block {
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            border-top: 4px solid #4b6cb7;
        }
        
        .block-title {
            font-size: 1.4rem;
            color: #182848;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .block-title i {
            color: #4b6cb7;
        }
        
        .solution-step {
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px dashed #eee;
        }
        
        .step-title {
            font-weight: 600;
            color: #4b6cb7;
            margin-bottom: 0.5rem;
        }
        
        .math-equation {
            background-color: #f8f9fa;
            padding: 0.8rem;
            border-radius: 4px;
            margin: 0.5rem 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }
        
        /* Graph Section */
        .graph-section {
            margin-top: 2rem;
            background-color: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }
        
        .graph-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }
        
        .graph-box {
            border: 1px solid #eee;
            border-radius: 6px;
            padding: 1rem;
            background-color: #fdfdfd;
        }
        
        .graph-title {
            font-size: 1.2rem;
            color: #182848;
            margin-bottom: 1rem;
            text-align: center;
        }
        
        /* Feedback Modal */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.5rem;
            color: #182848;
        }
        
        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }
        
        .form-group {
            margin-bottom: 1.2rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.7rem;
            border: 1px solid #ccc;
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .cancel-btn, .send-btn {
            padding: 0.7rem 1.5rem;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            border: none;
        }
        
        .cancel-btn {
            background-color: #f1f1f1;
            color: #333;
        }
        
        .send-btn {
            background-color: #4b6cb7;
            color: white;
        }
        
        .send-btn:hover {
            background-color: #3a5795;
        }
        
        /* Footer */
        footer {
            background-color: #182848;
            color: white;
            padding: 2rem;
            text-align: center;
            margin-top: 3rem;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1.5rem 0;
        }
        
        .footer-links a {
            color: #b0c4de;
            text-decoration: none;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .copyright {
            color: #b0c4de;
            font-size: 0.9rem;
            margin-top: 1.5rem;
        }
        
        /* Responsive Design */
        @media (max-width: 768px) {
            .header-top {
                flex-direction: column;
                gap: 1rem;
                align-items: flex-start;
            }
            
            .hero {
                flex-direction: column;
                padding: 2rem 1rem;
            }
            
            .hero-content h2 {
                font-size: 2rem;
            }
            
            .input-section, .backend-page {
                margin: 1rem;
                padding: 1.5rem;
            }
            
            .solution-blocks {
                grid-template-columns: 1fr;
            }
            
            .graph-container {
                grid-template-columns: 1fr;
            }
            
            .footer-links {
                flex-direction: column;
                gap: 1rem;
            }
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="header-top">
            <div class="logo">
                <i class="fas fa-project-diagram"></i>
                <div class="logo-text">
                    <h1>Your home for your help</h1>
                    <p>Orthogonal Trajectory Calculator & Mathematical Solutions</p>
                </div>
            </div>
            <div class="contact-issue">
                <button class="contact-btn" id="contactBtn">
                    <i class="fas fa-envelope"></i> Contact Us
                </button>
                <button class="issue-btn" id="issueBtn">
                    <i class="fas fa-bug"></i> Report Issue
                </button>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <h2>Calculate Orthogonal Trajectories with Step-by-Step Solutions</h2>
            <p>Enter any mathematical equation and get a complete solution with orthogonal trajectories, step-by-step explanations, and interactive graphs.</p>
            <p>Our system handles various equation types: differential equations, algebraic curves, implicit functions, and more.</p>
        </div>
        <div class="hero-image">
            <div class="math-img">
                <!-- Math/Graph collaboration image placeholder -->
                <svg width="400" height="300" viewBox="0 0 400 300" xmlns="http://www.w3.org/2000/svg">
                    <rect width="400" height="300" fill="#f0f8ff" rx="10"/>
                    <text x="30" y="50" font-family="Arial" font-size="18" fill="#182848">Mathematics + Graph Collaboration</text>
                    <path d="M50 100 Q150 50 250 100 T450 100" stroke="#4b6cb7" stroke-width="2" fill="none"/>
                    <path d="M50 100 Q150 150 250 100 T450 100" stroke="#ff6b6b" stroke-width="2" fill="none"/>
                    <circle cx="50" cy="100" r="4" fill="#4b6cb7"/>
                    <circle cx="150" cy="50" r="4" fill="#4b6cb7"/>
                    <circle cx="250" cy="100" r="4" fill="#4b6cb7"/>
                    <circle cx="150" cy="150" r="4" fill="#ff6b6b"/>
                    <text x="50" y="190" font-family="Arial" font-size="14" fill="#4b6cb7">Original Curve</text>
                    <text x="50" y="210" font-family="Arial" font-size="14" fill="#ff6b6b">Orthogonal Trajectory</text>
                    <text x="30" y="250" font-family="Arial" font-size="16" fill="#182848">Visualize mathematical relationships</text>
                </svg>
            </div>
        </div>
    </section>

    <!-- Input Section -->
    <section class="input-section" id="inputSection">
        <h2 class="section-title">Enter Your Mathematical Equation</h2>
        <div class="equation-input-container">
            <div class="input-group">
                <label for="equation">Equation (use * for multiplication, ^ for exponent)</label>
                <input type="text" id="equation" placeholder="e.g., y = x^2 + 2*x + 1 or x^2 + y^2 = r^2">
                <div class="examples">Examples: y = x^3 - 2x, x^2 + y^2 = 25, y' = x/y, y = sin(x) + cos(x)</div>
            </div>
            
            <div class="input-group">
                <label for="variables">Variables (comma separated, default: x,y)</label>
                <input type="text" id="variables" placeholder="e.g., x,y or r,theta or t,y">
            </div>
            
            <button class="submit-btn" id="submitBtn">
                <i class="fas fa-calculator"></i> Calculate Orthogonal Trajectories
            </button>
        </div>
    </section>

    <!-- Backend Page (Hidden by default) -->
    <section class="backend-page" id="backendPage">
        <button class="back-btn" id="backBtn">
            <i class="fas fa-arrow-left"></i> Back to Input
        </button>
        
        <h2 class="section-title">Solution: Orthogonal Trajectories</h2>
        
        <div class="solution-blocks">
            <!-- Block 1: Original Equation -->
            <div class="block">
                <h3 class="block-title"><i class="fas fa-equation"></i> Original Equation</h3>
                <div class="solution-step">
                    <div class="step-title">Given Equation:</div>
                    <div class="math-equation" id="originalEq">y = x^2</div>
                </div>
                <div class="solution-step">
                    <div class="step-title">Interpretation:</div>
                    <p>This equation defines a family of curves. We'll find the orthogonal trajectories to this family.</p>
                </div>
            </div>
            
            <!-- Block 2: Differential Equation Solution -->
            <div class="block">
                <h3 class="block-title"><i class="fas fa-step-forward"></i> Differential Equation Solution</h3>
                <div class="solution-step">
                    <div class="step-title">Step 1: Differentiate the equation</div>
                    <div class="math-equation">dy/dx = 2x</div>
                </div>
                <div class="solution-step">
                    <div class="step-title">Step 2: Express as differential equation</div>
                    <div class="math-equation">dy/dx = f(x, y) = 2x</div>
                </div>
                <div class="solution-step">
                    <div class="step-title">Step 3: General solution of the family</div>
                    <div class="math-equation">y = x^2 + C</div>
                    <p>Where C is an arbitrary constant defining each curve in the family.</p>
                </div>
            </div>
            
            <!-- Block 3: Orthogonal Trajectory Calculation -->
            <div class="block">
                <h3 class="block-title"><i class="fas fa-calculator"></i> Orthogonal Trajectory Calculation</h3>
                <div class="solution-step">
                    <div class="step-title">Step 1: Find slope of original curves</div>
                    <div class="math-equation">m_original = dy/dx = 2x</div>
                </div>
                <div class="solution-step">
                    <div class="step-title">Step 2: Find slope of orthogonal trajectories</div>
                    <div class="math-equation">m_orthogonal = -1/m_original = -1/(2x)</div>
                    <p>Orthogonal curves have slopes that are negative reciprocals.</p>
                </div>
                <div class="solution-step">
                    <div class="step-title">Step 3: Solve differential equation for orthogonal trajectories</div>
                    <div class="math-equation">dy/dx = -1/(2x)</div>
                    <div class="math-equation">dy = -dx/(2x)</div>
                    <div class="math-equation">∫dy = -1/2 ∫dx/x</div>
                    <div class="math-equation">y = -1/2 ln|x| + C</div>
                </div>
            </div>
            
            <!-- Block 4: Final Answer -->
            <div class="block">
                <h3 class="block-title"><i class="fas fa-check-circle"></i> Final Answer</h3>
                <div class="solution-step">
                    <div class="step-title">Original Family of Curves:</div>
                    <div class="math-equation">y = x^2 + C</div>
                </div>
                <div class="solution-step">
                    <div class="step-title">Orthogonal Trajectories:</div>
                    <div class="math-equation">y = -½ ln|x| + K</div>
                    <p>Where K is an arbitrary constant for the orthogonal family.</p>
                </div>
                <div class="solution-step">
                    <div class="step-title">Verification:</div>
                    <p>At any intersection point (x₀, y₀), the product of slopes is -1, confirming orthogonality.</p>
                </div>
            </div>
        </div>
        
        <!-- Graph Section -->
        <div class="graph-section">
            <h3 class="section-title">Graphical Representation</h3>
            <div class="graph-container">
                <div class="graph-box">
                    <div class="graph-title">Original Family of Curves</div>
                    <div id="originalGraph" style="height: 300px;"></div>
                </div>
                <div class="graph-box">
                    <div class="graph-title">Orthogonal Trajectories</div>
                    <div id="orthogonalGraph" style="height: 300px;"></div>
                </div>
            </div>
        </div>
    </section>

    <!-- Feedback Modal (appears when trying to leave) -->
    <div class="modal" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">We Value Your Feedback</h3>
                <button class="close-btn" id="closeFeedbackBtn">&times;</button>
            </div>
            <p>Please provide feedback before leaving. Your input helps us improve the service.</p>
            <form id="feedbackForm">
                <div class="form-group">
                    <label for="feedbackRating">Rating <span class="required">*</span></label>
                    <select id="feedbackRating" required>
                        <option value="">Select a rating</option>
                        <option value="5">Excellent - 5 stars</option>
                        <option value="4">Good - 4 stars</option>
                        <option value="3">Average - 3 stars</option>
                        <option value="2">Fair - 2 stars</option>
                        <option value="1">Poor - 1 star</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="feedbackComments">Comments <span class="required">*</span></label>
                    <textarea id="feedbackComments" placeholder="Please share your experience with the orthogonal trajectory calculator..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="feedbackEmail">Email (optional)</label>
                    <input type="email" id="feedbackEmail" placeholder="Enter your email if you'd like a response">
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" id="cancelFeedbackBtn">Cancel</button>
                    <button type="submit" class="send-btn">Submit Feedback</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Contact/Issue Modal -->
    <div class="modal" id="issueModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Report an Issue or Contact Us</h3>
                <button class="close-btn" id="closeIssueBtn">&times;</button>
            </div>
            <form id="issueForm">
                <div class="form-group">
                    <label for="issueType">Issue Type <span class="required">*</span></label>
                    <select id="issueType" required>
                        <option value="">Select issue type</option>
                        <option value="calculation">Calculation Error</option>
                        <option value="graph">Graph Display Problem</option>
                        <option value="interface">User Interface Issue</option>
                        <option value="performance">Performance Problem</option>
                        <option value="suggestion">Feature Suggestion</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="issueDescription">Description <span class="required">*</span></label>
                    <textarea id="issueDescription" placeholder="Please describe the issue or your question in detail..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="issueEquation">Equation (if applicable)</label>
                    <input type="text" id="issueEquation" placeholder="Enter the equation you were working with">
                </div>
                <div class="form-group">
                    <label for="issueEmail">Email <span class="required">*</span></label>
                    <input type="email" id="issueEmail" placeholder="Enter your email for follow-up" required>
                </div>
                <div class="form-actions">
                    <button type="button" class="cancel-btn" id="cancelIssueBtn">Cancel</button>
                    <button type="submit" class="send-btn">Submit Issue Report</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="logo">
                <i class="fas fa-project-diagram"></i>
                <div class="logo-text">
                    <h1>Your home for your help</h1>
                </div>
            </div>
            <div class="footer-links">
                <a href="#"><i class="fas fa-book"></i> Documentation</a>
                <a href="#"><i class="fas fa-graduation-cap"></i> Tutorials</a>
                <a href="#"><i class="fas fa-question-circle"></i> FAQ</a>
                <a href="#"><i class="fas fa-shield-alt"></i> Privacy Policy</a>
            </div>
            <p class="copyright">© 2023 Orthogonal Trajectory Calculator. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // DOM Elements
        const submitBtn = document.getElementById('submitBtn');
        const backBtn = document.getElementById('backBtn');
        const inputSection = document.getElementById('inputSection');
        const backendPage = document.getElementById('backendPage');
        const equationInput = document.getElementById('equation');
        const variablesInput = document.getElementById('variables');
        const originalEq = document.getElementById('originalEq');
        const contactBtn = document.getElementById('contactBtn');
        const issueBtn = document.getElementById('issueBtn');
        const feedbackModal = document.getElementById('feedbackModal');
        const issueModal = document.getElementById('issueModal');
        const closeFeedbackBtn = document.getElementById('closeFeedbackBtn');
        const closeIssueBtn = document.getElementById('closeIssueBtn');
        const cancelFeedbackBtn = document.getElementById('cancelFeedbackBtn');
        const cancelIssueBtn = document.getElementById('cancelIssueBtn');
        const feedbackForm = document.getElementById('feedbackForm');
        const issueForm = document.getElementById('issueForm');
        
        // Example equations for demonstration
        const exampleEquations = [
            "y = x^2",
            "x^2 + y^2 = r^2",
            "y = sin(x)",
            "y' = x/y",
            "y = e^x",
            "x*y = C"
        ];
        
        // Initialize with an example equation
        equationInput.value = exampleEquations[0];
        variablesInput.value = "x,y";
        
        // Submit button handler
        submitBtn.addEventListener('click', function() {
            const equation = equationInput.value.trim();
            const variables = variablesInput.value.trim() || "x,y";
            
            if (!equation) {
                alert("Please enter an equation");
                return;
            }
            
            // Update the displayed equation
            originalEq.textContent = equation;
            
            // Generate solution based on the equation
            generateSolution(equation);
            
            // Show backend page and hide input section
            inputSection.style.display = 'none';
            backendPage.style.display = 'block';
            
            // Generate graphs
            generateGraphs(equation);
        });
        
        // Back button handler
        backBtn.addEventListener('click', function() {
            // Show the feedback modal when trying to go back
            feedbackModal.style.display = 'flex';
        });
        
        // Contact and Issue buttons
        contactBtn.addEventListener('click', function() {
            issueModal.style.display = 'flex';
        });
        
        issueBtn.addEventListener('click', function() {
            issueModal.style.display = 'flex';
        });
        
        // Modal close buttons
        closeFeedbackBtn.addEventListener('click', function() {
            feedbackModal.style.display = 'none';
        });
        
        closeIssueBtn.addEventListener('click', function() {
            issueModal.style.display = 'none';
        });
        
        cancelFeedbackBtn.addEventListener('click', function() {
            feedbackModal.style.display = 'none';
        });
        
        cancelIssueBtn.addEventListener('click', function() {
            issueModal.style.display = 'none';
        });
        
        // Form submission handlers
        feedbackForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert("Thank you for your feedback! You may now leave the site.");
            feedbackModal.style.display = 'none';
            // In a real implementation, this would submit to a server
        });
        
        issueForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert("Issue report submitted. We'll contact you at the provided email.");
            issueModal.style.display = 'none';
            // In a real implementation, this would submit to a server
        });
        
        // Generate solution based on equation type
        function generateSolution(equation) {
            // This is a simplified demonstration
            // In a real implementation, this would involve a proper equation parser
            // and symbolic mathematics library
            
            // For demonstration, we'll show different solutions based on the equation
            let solutionBlocks = document.querySelectorAll('.block');
            
            // Update Block 1 with the actual equation
            solutionBlocks[0].querySelector('.math-equation').textContent = equation;
            
            // Different solutions for different equation patterns
            if (equation.includes('x^2 + y^2')) {
                // Circle equation
                updateCircleSolution(equation);
            } else if (equation.includes('sin') || equation.includes('cos')) {
                // Trigonometric equation
                updateTrigSolution(equation);
            } else if (equation.includes('e^') || equation.includes('exp')) {
                // Exponential equation
                updateExpSolution(equation);
            } else if (equation.includes('y = x^2')) {
                // Parabola - already the default
                updateParabolaSolution(equation);
            } else {
                // Default parabola solution
                updateParabolaSolution(equation);
            }
        }
        
        function updateParabolaSolution(equation) {
            // This is already the default in the HTML
            // No changes needed
        }
        
        function updateCircleSolution(equation) {
            const blocks = document.querySelectorAll('.block');
            
            // Update Block 2
            let block2Content = blocks[1].querySelectorAll('.solution-step');
            block2Content[0].querySelector('.math-equation').textContent = "Differentiate implicitly: 2x + 2y(dy/dx) = 0";
            block2Content[1].querySelector('.math-equation').textContent = "Solve for dy/dx: dy/dx = -x/y";
            block2Content[2].querySelector('.math-equation').textContent = "Family of circles: x² + y² = C";
            
            // Update Block 3
            let block3Content = blocks[2].querySelectorAll('.solution-step');
            block3Content[0].querySelector('.math-equation').textContent = "m_original = dy/dx = -x/y";
            block3Content[1].querySelector('.math-equation').textContent = "m_orthogonal = -1/m_original = y/x";
            block3Content[2].querySelectorAll('.math-equation')[0].textContent = "dy/dx = y/x";
            block3Content[2].querySelectorAll('.math-equation')[1].textContent = "dy/y = dx/x";
            block3Content[2].querySelectorAll('.math-equation')[2].textContent = "∫dy/y = ∫dx/x";
            block3Content[2].querySelectorAll('.math-equation')[3].textContent = "ln|y| = ln|x| + C";
            
            // Update Block 4
            let block4Content = blocks[3].querySelectorAll('.solution-step');
            block4Content[0].querySelector('.math-equation').textContent = "x² + y² = C";
            block4Content[1].querySelector('.math-equation').textContent = "y = Kx (where K is an arbitrary constant)";
        }
        
        function updateTrigSolution(equation) {
            const blocks = document.querySelectorAll('.block');
            
            // Update Block 2
            let block2Content = blocks[1].querySelectorAll('.solution-step');
            block2Content[0].querySelector('.math-equation').textContent = "Differentiate: dy/dx = cos(x)";
            block2Content[1].querySelector('.math-equation').textContent = "The differential equation is: dy/dx = cos(x)";
            block2Content[2].querySelector('.math-equation').textContent = "General solution: y = sin(x) + C";
            
            // Update Block 3
            let block3Content = blocks[2].querySelectorAll('.solution-step');
            block3Content[0].querySelector('.math-equation').textContent = "m_original = dy/dx = cos(x)";
            block3Content[1].querySelector('.math-equation').textContent = "m_orthogonal = -1/cos(x) = -sec(x)";
            block3Content[2].querySelectorAll('.math-equation')[0].textContent = "dy/dx = -sec(x)";
            block3Content[2].querySelectorAll('.math-equation')[1].textContent = "dy = -sec(x) dx";
            block3Content[2].querySelectorAll('.math-equation')[2].textContent = "∫dy = -∫sec(x) dx";
            block3Content[2].querySelectorAll('.math-equation')[3].textContent = "y = -ln|sec(x) + tan(x)| + C";
            
            // Update Block 4
            let block4Content = blocks[3].querySelectorAll('.solution-step');
            block4Content[0].querySelector('.math-equation').textContent = "y = sin(x) + C";
            block4Content[1].querySelector('.math-equation').textContent = "y = -ln|sec(x) + tan(x)| + K";
        }
        
        function updateExpSolution(equation) {
            const blocks = document.querySelectorAll('.block');
            
            // Update Block 2
            let block2Content = blocks[1].querySelectorAll('.solution-step');
            block2Content[0].querySelector('.math-equation').textContent = "Differentiate: dy/dx = e^x";
            block2Content[1].querySelector('.math-equation').textContent = "The differential equation is: dy/dx = e^x";
            block2Content[2].querySelector('.math-equation').textContent = "General solution: y = e^x + C";
            
            // Update Block 3
            let block3Content = blocks[2].querySelectorAll('.solution-step');
            block3Content[0].querySelector('.math-equation').textContent = "m_original = dy/dx = e^x";
            block3Content[1].querySelector('.math-equation').textContent = "m_orthogonal = -1/e^x = -e^(-x)";
            block3Content[2].querySelectorAll('.math-equation')[0].textContent = "dy/dx = -e^(-x)";
            block3Content[2].querySelectorAll('.math-equation')[1].textContent = "dy = -e^(-x) dx";
            block3Content[2].querySelectorAll('.math-equation')[2].textContent = "∫dy = -∫e^(-x) dx";
            block3Content[2].querySelectorAll('.math-equation')[3].textContent = "y = e^(-x) + C";
            
            // Update Block 4
            let block4Content = blocks[3].querySelectorAll('.solution-step');
            block4Content[0].querySelector('.math-equation').textContent = "y = e^x + C";
            block4Content[1].querySelector('.math-equation').textContent = "y = e^(-x) + K";
        }
        
        // Generate graphs based on equation
        function generateGraphs(equation) {
            // Original curve graph
            const originalTrace = {
                x: [],
                y: [],
                mode: 'lines',
                name: 'Original Curve',
                line: { color: '#4b6cb7', width: 3 }
            };
            
            // Orthogonal trajectory graph
            const orthogonalTrace = {
                x: [],
                y: [],
                mode: 'lines',
                name: 'Orthogonal Trajectory',
                line: { color: '#ff6b6b', width: 3 }
            };
            
            // Generate data based on equation type
            if (equation.includes('x^2 + y^2')) {
                // Circle and line through origin
                for (let i = -5; i <= 5; i += 0.1) {
                    originalTrace.x.push(i);
                    originalTrace.y.push(Math.sqrt(Math.max(0, 25 - i*i)));
                }
                for (let i = 5; i >= -5; i -= 0.1) {
                    originalTrace.x.push(i);
                    originalTrace.y.push(-Math.sqrt(Math.max(0, 25 - i*i)));
                }
                
                for (let i = -5; i <= 5; i += 0.1) {
                    orthogonalTrace.x.push(i);
                    orthogonalTrace.y.push(2*i); // y = 2x
                }
            } else if (equation.includes('sin') || equation.includes('cos')) {
                // Sine and -ln|sec+tan|
                for (let i = -5; i <= 5; i += 0.1) {
                    originalTrace.x.push(i);
                    originalTrace.y.push(Math.sin(i));
                    
                    orthogonalTrace.x.push(i);
                    orthogonalTrace.y.push(-Math.log(Math.abs(1/Math.cos(i) + Math.tan(i))) || 0);
                }
            } else if (equation.includes('e^') || equation.includes('exp')) {
                // Exponential and negative exponential
                for (let i = -3; i <= 2; i += 0.1) {
                    originalTrace.x.push(i);
                    originalTrace.y.push(Math.exp(i));
                    
                    orthogonalTrace.x.push(i);
                    orthogonalTrace.y.push(Math.exp(-i));
                }
            } else {
                // Default parabola and logarithmic
                for (let i = 0.1; i <= 3; i += 0.1) {
                    originalTrace.x.push(i);
                    originalTrace.y.push(i*i);
                    
                    orthogonalTrace.x.push(i);
                    orthogonalTrace.y.push(-0.5 * Math.log(i));
                }
                for (let i = -3; i <= -0.1; i += 0.1) {
                    originalTrace.x.push(i);
                    originalTrace.y.push(i*i);
                    
                    orthogonalTrace.x.push(i);
                    orthogonalTrace.y.push(-0.5 * Math.log(-i));
                }
            }
            
            // Original graph layout
            const originalLayout = {
                title: 'Family of Curves',
                xaxis: { title: 'x', gridcolor: '#eee', zerolinecolor: '#ccc' },
                yaxis: { title: 'y', gridcolor: '#eee', zerolinecolor: '#ccc' },
                plot_bgcolor: '#fdfdfd',
                paper_bgcolor: '#fdfdfd',
                showlegend: true,
                legend: { x: 0, y: 1.1, orientation: 'h' }
            };
            
            // Orthogonal graph layout
            const orthogonalLayout = {
                title: 'Orthogonal Trajectories',
                xaxis: { title: 'x', gridcolor: '#eee', zerolinecolor: '#ccc' },
                yaxis: { title: 'y', gridcolor: '#eee', zerolinecolor: '#ccc' },
                plot_bgcolor: '#fdfdfd',
                paper_bgcolor: '#fdfdfd',
                showlegend: true,
                legend: { x: 0, y: 1.1, orientation: 'h' }
            };
            
            // Plot the graphs
            Plotly.newPlot('originalGraph', [originalTrace], originalLayout);
            Plotly.newPlot('orthogonalGraph', [orthogonalTrace], orthogonalLayout);
        }
        
        // Initialize page with example
        generateSolution(exampleEquations[0]);
        generateGraphs(exampleEquations[0]);
        
        // Show feedback modal when user tries to leave the site
        window.addEventListener('beforeunload', function(e) {
            // In a real implementation, this would check if feedback was given
            // For demonstration, we'll show the modal
            // e.preventDefault();
            // e.returnValue = '';
            // feedbackModal.style.display = 'flex';
        });
    </script>
</body>
</html>
