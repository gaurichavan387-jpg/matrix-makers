<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orthogonal Trajectory Calculator</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: white;
            color: #333;
            line-height: 1.6;
        }
        
        /* Header Styles */
        .top-header {
            background: white;
            padding: 1rem 2rem;
            border-bottom: 3px solid #4b6cb7;
        }
        
        .top-heading {
            color: black;
            font-size: 2.2rem;
            font-weight: 700;
            text-align: left;
        }
        
        .nav-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #4b6cb7 0%, #182848 100%);
            color: white;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .logo i {
            font-size: 1.8rem;
            color: #6dd5ed;
        }
        
        .logo-text {
            font-size: 1.4rem;
            font-weight: 600;
        }
        
        .contact-box {
            display: flex;
            gap: 15px;
        }
        
        .contact-btn, .issue-btn {
            padding: 0.6rem 1.2rem;
            border-radius: 4px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            color: white;
        }
        
        .contact-btn {
            background-color: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        
        .issue-btn {
            background-color: #ff6b6b;
        }
        
        .contact-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        
        .issue-btn:hover {
            background-color: #ff5252;
        }
        
        /* Hero Section */
        .hero-section {
            display: flex;
            align-items: center;
            padding: 3rem 2rem;
            gap: 3rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .hero-content {
            flex: 1;
        }
        
        .hero-content h2 {
            font-size: 2.5rem;
            color: #182848;
            margin-bottom: 1rem;
        }
        
        .hero-content p {
            font-size: 1.1rem;
            color: #555;
            margin-bottom: 1.5rem;
        }
        
        .collab-image {
            flex: 1;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        .math-graph-img {
            width: 100%;
            height: 300px;
            background: linear-gradient(45deg, #4b6cb7, #6dd5ed);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
        }
        
        .math-graph-img i {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        
        /* Input Section */
        .input-section {
            background-color: #f9f9f9;
            padding: 2.5rem;
            border-radius: 10px;
            max-width: 800px;
            margin: 2rem auto;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        
        .section-title {
            color: #182848;
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #4b6cb7;
        }
        
        .equation-input-container {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }
        
        .input-group label {
            font-weight: 600;
            color: #333;
            font-size: 1.1rem;
        }
        
        .input-group input {
            padding: 0.9rem 1rem;
            border: 2px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: all 0.3s;
        }
        
        .input-group input:focus {
            border-color: #4b6cb7;
            outline: none;
            box-shadow: 0 0 0 3px rgba(75, 108, 183, 0.2);
        }
        
        .examples {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.3rem;
            font-style: italic;
        }
        
        .submit-btn {
            background: linear-gradient(to right, #4b6cb7, #182848);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            font-weight: 600;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s ease;
            align-self: flex-start;
            margin-top: 1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(75, 108, 183, 0.4);
        }
        
        /* Backend Page */
        .backend-page {
            padding: 2rem;
            display: none;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .back-home-btn {
            background-color: #4b6cb7;
            color: white;
            border: none;
            padding: 0.8rem 1.8rem;
            border-radius: 6px;
            cursor: pointer;
            margin-bottom: 2rem;
            font-weight: 600;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s;
        }
        
        .back-home-btn:hover {
            background-color: #3a5795;
        }
        
        .solution-blocks {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.8rem;
            margin-bottom: 2.5rem;
        }
        
        .block {
            background-color: white;
            border-radius: 10px;
            padding: 1.8rem;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
            border-top: 5px solid #4b6cb7;
            transition: transform 0.3s;
        }
        
        .block:hover {
            transform: translateY(-5px);
        }
        
        .block-title {
            font-size: 1.4rem;
            color: #182848;
            margin-bottom: 1.2rem;
            display: flex;
            align-items: center;
            gap: 0.7rem;
        }
        
        .block-title i {
            color: #4b6cb7;
        }
        
        .solution-step {
            margin-bottom: 1.2rem;
            padding-bottom: 1.2rem;
            border-bottom: 1px dashed #eee;
        }
        
        .step-title {
            font-weight: 600;
            color: #4b6cb7;
            margin-bottom: 0.7rem;
            font-size: 1.1rem;
        }
        
        .math-equation {
            background-color: #f8f9fa;
            padding: 1rem;
            border-radius: 6px;
            margin: 0.7rem 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1rem;
            overflow-x: auto;
            border-left: 4px solid #4b6cb7;
        }
        
        /* Graph Section */
        .graph-section {
            margin-top: 3rem;
            background-color: white;
            border-radius: 10px;
            padding: 2rem;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.08);
        }
        
        .graph-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 2rem;
            margin-top: 1.8rem;
        }
        
        .graph-box {
            border: 2px solid #f0f0f0;
            border-radius: 8px;
            padding: 1.5rem;
            background-color: #fdfdfd;
            transition: all 0.3s;
        }
        
        .graph-box:hover {
            border-color: #4b6cb7;
        }
        
        .graph-title {
            font-size: 1.3rem;
            color: #182848;
            margin-bottom: 1.2rem;
            text-align: center;
            font-weight: 600;
        }
        
        /* Modal Styles */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        
        .modal-header {
            background: linear-gradient(to right, #4b6cb7, #182848);
            color: white;
            padding: 1.5rem;
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .modal-body {
            padding: 2rem;
        }
        
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: #333;
        }
        
        .required {
            color: #e74c3c;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 1rem;
            transition: border 0.3s;
        }
        
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            border-color: #4b6cb7;
            outline: none;
            box-shadow: 0 0 0 3px rgba(75, 108, 183, 0.2);
        }
        
        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }
        
        .modal-footer {
            padding: 1.5rem 2rem;
            background-color: #f9f9f9;
            display: flex;
            justify-content: flex-end;
            gap: 1rem;
        }
        
        .modal-btn {
            padding: 0.8rem 1.8rem;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.3s;
        }
        
        .cancel-btn {
            background-color: #f1f1f1;
            color: #333;
        }
        
        .cancel-btn:hover {
            background-color: #e0e0e0;
        }
        
        .submit-modal-btn {
            background: linear-gradient(to right, #4b6cb7, #182848);
            color: white;
        }
        
        .submit-modal-btn:hover {
            background: linear-gradient(to right, #3a5795, #0d1c3d);
        }
        
        /* Footer */
        footer {
            background-color: #182848;
            color: white;
            padding: 2.5rem 2rem;
            text-align: center;
            margin-top: 4rem;
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin: 1.8rem 0;
            flex-wrap: wrap;
        }
        
        .footer-links a {
            color: #b0c4de;
            text-decoration: none;
            transition: color 0.3s;
        }
        
        .footer-links a:hover {
            color: white;
        }
        
        .copyright {
            color: #b0c4de;
            font-size: 0.9rem;
            margin-top: 1.8rem;
        }
        
        /* Responsive Design */
        @media (max-width: 992px) {
            .hero-section {
                flex-direction: column;
                padding: 2rem 1rem;
            }
            
            .collab-image {
                width: 100%;
            }
            
            .graph-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .nav-bar {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }
            
            .contact-box {
                width: 100%;
                justify-content: center;
            }
            
            .input-section, .backend-page {
                padding: 1.5rem;
                margin: 1.5rem;
            }
            
            .solution-blocks {
                grid-template-columns: 1fr;
            }
            
            .graph-container {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 480px) {
            .top-heading {
                font-size: 1.8rem;
            }
            
            .hero-content h2 {
                font-size: 2rem;
            }
            
            .contact-btn, .issue-btn {
                padding: 0.5rem 1rem;
                font-size: 0.9rem;
            }
            
            .math-graph-img {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Header Section -->
    <header>
        <div class="top-header">
            <h1 class="top-heading">Your home for your help</h1>
        </div>
        
        <div class="nav-bar">
            <div class="logo">
                <i class="fas fa-calculator"></i>
                <div class="logo-text">Orthogonal Trajectory Calculator</div>
            </div>
            
            <div class="contact-box">
                <button class="contact-btn" id="contactBtn">
                    <i class="fas fa-envelope"></i> Contact Us
                </button>
                <button class="issue-btn" id="issueBtn">
                    <i class="fas fa-exclamation-circle"></i> Report Issue
                </button>
            </div>
        </div>
    </header>

    <!-- Front Page -->
    <div id="frontPage">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-content">
                <h2>Calculate Orthogonal Trajectories with Precision</h2>
                <p>Enter any mathematical equation and get a complete step-by-step solution for orthogonal trajectories. Our tool handles differential equations, implicit functions, and various curve families.</p>
                <p>Perfect for students, engineers, and mathematicians who need to find perpendicular curve families.</p>
                <ul style="margin-top: 1.5rem; padding-left: 1.5rem;">
                    <li>Step-by-step differential equation solutions</li>
                    <li>Clear orthogonal trajectory calculations</li>
                    <li>Interactive graphical representations</li>
                    <li>Support for multiple equation formats</li>
                </ul>
            </div>
            
            <div class="collab-image">
                <div class="math-graph-img">
                    <i class="fas fa-chart-line"></i>
                    <div>Mathematics + Graph Collaboration</div>
                    <p style="font-size: 1rem; margin-top: 1rem;">Visualize mathematical relationships with interactive graphs</p>
                </div>
            </div>
        </section>

        <!-- Input Section -->
        <section class="input-section">
            <h2 class="section-title">Enter Your Mathematical Equation</h2>
            <div class="equation-input-container">
                <div class="input-group">
                    <label for="equation">Equation (use * for multiplication, ^ for exponent, ' for derivative)</label>
                    <input type="text" id="equation" placeholder="e.g., y = x^2, x^2 + y^2 = r^2, y' = x/y">
                    <div class="examples">Examples: y = x^3 - 2x, x^2/a^2 + y^2/b^2 = 1, dy/dx = -x/y, y = sin(x) + C</div>
                </div>
                
                <div class="input-group">
                    <label for="variables">Variables (comma separated, default: x,y)</label>
                    <input type="text" id="variables" placeholder="e.g., x,y or r,theta or t,y">
                </div>
                
                <button class="submit-btn" id="submitBtn">
                    <i class="fas fa-calculator"></i> Calculate Orthogonal Trajectories
                </button>
            </div>
        </section>
    </div>

    <!-- Backend Page (Hidden initially) -->
    <div class="backend-page" id="backendPage">
        <button class="back-home-btn" id="backHomeBtn">
            <i class="fas fa-home"></i> Back to Home
        </button>
        
        <h2 class="section-title">Solution: Orthogonal Trajectories</h2>
        
        <div class="solution-blocks">
            <!-- Block 1: Original Equation -->
            <div class="block">
                <h3 class="block-title"><i class="fas fa-equation"></i> Original Equation</h3>
                <div class="solution-step">
                    <div class="step-title">Given Equation:</div>
                    <div class="math-equation" id="originalEqDisplay">y = x^2</div>
                </div>
                <div class="solution-step">
                    <div class="step-title">Interpretation:</div>
                    <p>This equation defines a family of curves. We need to find the orthogonal trajectories to this family.</p>
                </div>
                <div class="solution-step">
                    <div class="step-title">Variables:</div>
                    <div class="math-equation" id="variablesDisplay">x, y</div>
                </div>
            </div>
            
            <!-- Block 2: Differential Equation Solution -->
            <div class="block">
                <h3 class="block-title"><i class="fas fa-step-forward"></i> Differential Equation Solution</h3>
                <div class="solution-step">
                    <div class="step-title">Step 1: Differentiate the equation</div>
                    <div class="math-equation">dy/dx = 2x</div>
                </div>
                <div class="solution-step">
                    <div class="step-title">Step 2: Express as differential equation</div>
                    <div class="math-equation">dy/dx = f(x, y) = 2x</div>
                    <p>The slope of the tangent to the curve at any point (x, y) is 2x.</p>
                </div>
                <div class="solution-step">
                    <div class="step-title">Step 3: General solution of the family</div>
                    <div class="math-equation">y = x^2 + C</div>
                    <p>Where C is an arbitrary constant defining each curve in the family.</p>
                </div>
            </div>
            
            <!-- Block 3: Orthogonal Trajectory Calculation -->
            <div class="block">
                <h3 class="block-title"><i class="fas fa-calculator"></i> Orthogonal Trajectory Calculation</h3>
                <div class="solution-step">
                    <div class="step-title">Step 1: Find slope of original curves</div>
                    <div class="math-equation">m_original = dy/dx = 2x</div>
                </div>
                <div class="solution-step">
                    <div class="step-title">Step 2: Find slope of orthogonal trajectories</div>
                    <div class="math-equation">m_orthogonal = -1/m_original = -1/(2x)</div>
                    <p>Orthogonal curves have slopes that are negative reciprocals.</p>
                </div>
                <div class="solution-step">
                    <div class="step-title">Step 3: Solve differential equation for orthogonal trajectories</div>
                    <div class="math-equation">dy/dx = -1/(2x)</div>
                    <div class="math-equation">dy = -dx/(2x)</div>
                    <div class="math-equation">∫dy = -1/2 ∫dx/x</div>
                    <div class="math-equation">y = -1/2 ln|x| + K</div>
                </div>
            </div>
            
            <!-- Block 4: Final Answer -->
            <div class="block">
                <h3 class="block-title"><i class="fas fa-check-circle"></i> Final Answer</h3>
                <div class="solution-step">
                    <div class="step-title">Family of Curves:</div>
                    <div class="math-equation">y = x^2 + C</div>
                    <p>Where C is an arbitrary constant.</p>
                </div>
                <div class="solution-step">
                    <div class="step-title">Orthogonal Trajectories:</div>
                    <div class="math-equation">y = -½ ln|x| + K</div>
                    <p>Where K is an arbitrary constant for the orthogonal family.</p>
                </div>
                <div class="solution-step">
                    <div class="step-title">Verification:</div>
                    <p>At intersection point (x₀, y₀): m₁ × m₂ = (2x₀) × (-1/(2x₀)) = -1 ✓</p>
                </div>
            </div>
        </div>
        
        <!-- Graph Section -->
        <div class="graph-section">
            <h3 class="section-title">Graphical Representation</h3>
            <p style="margin-bottom: 1.5rem;">The graphs below show the original family of curves and their orthogonal trajectories.</p>
            
            <div class="graph-container">
                <div class="graph-box">
                    <div class="graph-title">Original Family of Curves</div>
                    <div id="originalGraph" style="height: 400px;"></div>
                </div>
                <div class="graph-box">
                    <div class="graph-title">Orthogonal Trajectories</div>
                    <div id="orthogonalGraph" style="height: 400px;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Feedback Modal -->
    <div class="modal-overlay" id="feedbackModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">We Value Your Feedback</h3>
            </div>
            <div class="modal-body">
                <p style="margin-bottom: 1.5rem;">Please provide feedback before leaving. This helps us improve our service.</p>
                <form id="feedbackForm">
                    <div class="form-group">
                        <label for="feedbackRating">Rating <span class="required">*</span></label>
                        <select id="feedbackRating" required>
                            <option value="">Select a rating</option>
                            <option value="5">Excellent - 5 stars</option>
                            <option value="4">Good - 4 stars</option>
                            <option value="3">Average - 3 stars</option>
                            <option value="2">Fair - 2 stars</option>
                            <option value="1">Poor - 1 star</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="feedbackComments">Comments <span class="required">*</span></label>
                        <textarea id="feedbackComments" placeholder="Please share your experience with the orthogonal trajectory calculator..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="feedbackEmail">Email (optional)</label>
                        <input type="email" id="feedbackEmail" placeholder="Enter your email if you'd like a response">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="modal-btn cancel-btn" id="cancelFeedbackBtn">Cancel</button>
                <button type="submit" form="feedbackForm" class="modal-btn submit-modal-btn">Submit Feedback</button>
            </div>
        </div>
    </div>

    <!-- Issue/Contact Modal -->
    <div class="modal-overlay" id="issueModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Report an Issue or Contact Us</h3>
            </div>
            <div class="modal-body">
                <form id="issueForm">
                    <div class="form-group">
                        <label for="issueType">Issue Type <span class="required">*</span></label>
                        <select id="issueType" required>
                            <option value="">Select issue type</option>
                            <option value="calculation">Calculation Error</option>
                            <option value="graph">Graph Display Problem</option>
                            <option value="interface">User Interface Issue</option>
                            <option value="performance">Performance Problem</option>
                            <option value="suggestion">Feature Suggestion</option>
                            <option value="other">Other</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="issueDescription">Description <span class="required">*</span></label>
                        <textarea id="issueDescription" placeholder="Please describe the issue or your question in detail..." required></textarea>
                    </div>
                    <div class="form-group">
                        <label for="issueEquation">Equation (if applicable)</label>
                        <input type="text" id="issueEquation" placeholder="Enter the equation you were working with">
                    </div>
                    <div class="form-group">
                        <label for="issueEmail">Email <span class="required">*</span></label>
                        <input type="email" id="issueEmail" placeholder="Enter your email for follow-up" required>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="modal-btn cancel-btn" id="cancelIssueBtn">Cancel</button>
                <button type="submit" form="issueForm" class="modal-btn submit-modal-btn">Submit Issue Report</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div style="margin-bottom: 1.5rem;">
                <h2 style="color: white; font-size: 1.8rem;">Your home for your help</h2>
                <p style="color: #b0c4de; margin-top: 0.5rem;">Orthogonal Trajectory Calculator</p>
            </div>
            
            <div class="footer-links">
                <a href="#"><i class="fas fa-book"></i> Documentation</a>
                <a href="#"><i class="fas fa-graduation-cap"></i> Tutorials</a>
                <a href="#"><i class="fas fa-question-circle"></i> FAQ</a>
                <a href="#"><i class="fas fa-shield-alt"></i> Privacy Policy</a>
                <a href="#"><i class="fas fa-file-contract"></i> Terms of Service</a>
            </div>
            
            <div class="copyright">
                <p>© 2023 Orthogonal Trajectory Calculator. All rights reserved.</p>
                <p style="margin-top: 0.5rem;">For educational and research purposes.</p>
            </div>
        </div>
    </footer>

    <script>
        // DOM Elements
        const frontPage = document.getElementById('frontPage');
        const backendPage = document.getElementById('backendPage');
        const submitBtn = document.getElementById('submitBtn');
        const backHomeBtn = document.getElementById('backHomeBtn');
        const equationInput = document.getElementById('equation');
        const variablesInput = document.getElementById('variables');
        const originalEqDisplay = document.getElementById('originalEqDisplay');
        const variablesDisplay = document.getElementById('variablesDisplay');
        const contactBtn = document.getElementById('contactBtn');
        const issueBtn = document.getElementById('issueBtn');
        const feedbackModal = document.getElementById('feedbackModal');
        const issueModal = document.getElementById('issueModal');
        const cancelFeedbackBtn = document.getElementById('cancelFeedbackBtn');
        const cancelIssueBtn = document.getElementById('cancelIssueBtn');
        const feedbackForm = document.getElementById('feedbackForm');
        const issueForm = document.getElementById('issueForm');
        
        // Example equations
        const exampleEquations = [
            "y = x^2",
            "x^2 + y^2 = r^2",
            "y = sin(x)",
            "y' = x/y",
            "y = e^x",
            "x*y = C",
            "y = 1/x",
            "x^2/9 + y^2/4 = 1"
        ];
        
        // Initialize with an example
        equationInput.value = exampleEquations[0];
        variablesInput.value = "x,y";
        
        // Submit button - go to backend page
        submitBtn.addEventListener('click', function() {
            const equation = equationInput.value.trim();
            const variables = variablesInput.value.trim() || "x,y";
            
            if (!equation) {
                alert("Please enter an equation");
                return;
            }
            
            // Update displayed equation and variables
            originalEqDisplay.textContent = equation;
            variablesDisplay.textContent = variables;
            
            // Generate solution based on equation
            generateSolution(equation);
            
            // Show backend page, hide front page
            frontPage.style.display = 'none';
            backendPage.style.display = 'block';
            
            // Generate graphs
            generateGraphs(equation);
        });
        
        // Back to home button
        backHomeBtn.addEventListener('click', function() {
            // Show feedback modal before going back
            showFeedbackModal();
        });
        
        // Contact and Issue buttons
        contactBtn.addEventListener('click', function() {
            issueModal.style.display = 'flex';
        });
        
        issueBtn.addEventListener('click', function() {
            issueModal.style.display = 'flex';
        });
        
        // Modal close buttons
        cancelFeedbackBtn.addEventListener('click', function() {
            feedbackModal.style.display = 'none';
        });
        
        cancelIssueBtn.addEventListener('click', function() {
            issueModal.style.display = 'none';
        });
        
        // Form submissions
        feedbackForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert("Thank you for your feedback! You may now leave the site.");
            feedbackModal.style.display = 'none';
            // Actually go back to home page
            backendPage.style.display = 'none';
            frontPage.style.display = 'block';
        });
        
        issueForm.addEventListener('submit', function(e) {
            e.preventDefault();
            alert("Issue report submitted. We'll contact you at the provided email.");
            issueModal.style.display = 'none';
        });
        
        // Show feedback modal
        function showFeedbackModal() {
            feedbackModal.style.display = 'flex';
        }
        
        // Generate solution based on equation
        function generateSolution(equation) {
            // This is a simplified demonstration
            // In reality, you would need a proper equation parser
            
            const blocks = document.querySelectorAll('.block');
            
            // Determine equation type and update solutions accordingly
            if (equation.includes('x^2 + y^2') || equation.includes('r^2')) {
                updateCircleSolution(blocks, equation);
            } else if (equation.includes('sin') || equation.includes('cos')) {
                updateTrigSolution(blocks, equation);
            } else if (equation.includes('e^') || equation.includes('exp')) {
                updateExpSolution(blocks, equation);
            } else if (equation.includes('1/x')) {
                updateHyperbolaSolution(blocks, equation);
            } else if (equation.includes('/')) {
                updateEllipseSolution(blocks, equation);
            } else {
                // Default parabola solution (already in HTML)
                updateParabolaSolution(blocks, equation);
            }
        }
        
        function updateParabolaSolution(blocks, equation) {
            // Already the default, no changes needed
        }
        
        function updateCircleSolution(blocks, equation) {
            // Block 2: Differential Equation Solution
            let block2Steps = blocks[1].querySelectorAll('.solution-step');
            block2Steps[0].querySelector('.math-equation').textContent = "Differentiate implicitly: 2x + 2y(dy/dx) = 0";
            block2Steps[1].querySelector('.math-equation').textContent = "Solve for dy/dx: dy/dx = -x/y";
            block2Steps[2].querySelector('.math-equation').textContent = "Family of circles: x² + y² = C";
            
            // Block 3: Orthogonal Trajectory Calculation
            let block3Steps = blocks[2].querySelectorAll('.solution-step');
            block3Steps[0].querySelector('.math-equation').textContent = "m_original = dy/dx = -x/y";
            block3Steps[1].querySelector('.math-equation').textContent = "m_orthogonal = -1/m_original = y/x";
            block3Steps[2].querySelectorAll('.math-equation')[0].textContent = "dy/dx = y/x";
            block3Steps[2].querySelectorAll('.math-equation')[1].textContent = "dy/y = dx/x";
            block3Steps[2].querySelectorAll('.math-equation')[2].textContent = "∫dy/y = ∫dx/x";
            block3Steps[2].querySelectorAll('.math-equation')[3].textContent = "ln|y| = ln|x| + K";
            
            // Block 4: Final Answer
            let block4Steps = blocks[3].querySelectorAll('.solution-step');
            block4Steps[0].querySelector('.math-equation').textContent = "x² + y² = C";
            block4Steps[1].querySelector('.math-equation').textContent = "y = Kx (lines through origin)";
        }
        
        function updateTrigSolution(blocks, equation) {
            let block2Steps = blocks[1].querySelectorAll('.solution-step');
            block2Steps[0].querySelector('.math-equation').textContent = "Differentiate: dy/dx = cos(x)";
            block2Steps[1].querySelector('.math-equation').textContent = "The differential equation is: dy/dx = cos(x)";
            block2Steps[2].querySelector('.math-equation').textContent = "General solution: y = sin(x) + C";
            
            let block3Steps = blocks[2].querySelectorAll('.solution-step');
            block3Steps[0].querySelector('.math-equation').textContent = "m_original = dy/dx = cos(x)";
            block3Steps[1].querySelector('.math-equation').textContent = "m_orthogonal = -1/cos(x) = -sec(x)";
            block3Steps[2].querySelectorAll('.math-equation')[0].textContent = "dy/dx = -sec(x)";
            block3Steps[2].querySelectorAll('.math-equation')[1].textContent = "dy = -sec(x) dx";
            block3Steps[2].querySelectorAll('.math-equation')[2].textContent = "∫dy = -∫sec(x) dx";
            block3Steps[2].querySelectorAll('.math-equation')[3].textContent = "y = -ln|sec(x) + tan(x)| + K";
            
            let block4Steps = blocks[3].querySelectorAll('.solution-step');
            block4Steps[0].querySelector('.math-equation').textContent = "y = sin(x) + C";
            block4Steps[1].querySelector('.math-equation').textContent = "y = -ln|sec(x) + tan(x)| + K";
        }
        
        function updateExpSolution(blocks, equation) {
            let block2Steps = blocks[1].querySelectorAll('.solution-step');
            block2Steps[0].querySelector('.math-equation').textContent = "Differentiate: dy/dx = e^x";
            block2Steps[1].querySelector('.math-equation').textContent = "The differential equation is: dy/dx = e^x";
            block2Steps[2].querySelector('.math-equation').textContent = "General solution: y = e^x + C";
            
            let block3Steps = blocks[2].querySelectorAll('.solution-step');
            block3Steps[0].querySelector('.math-equation').textContent = "m_original = dy/dx = e^x";
            block3Steps[1].querySelector('.math-equation').textContent = "m_orthogonal = -1/e^x = -e^(-x)";
            block3Steps[2].querySelectorAll('.math-equation')[0].textContent = "dy/dx = -e^(-x)";
            block3Steps[2].querySelectorAll('.math-equation')[1].textContent = "dy = -e^(-x) dx";
            block3Steps[2].querySelectorAll('.math-equation')[2].textContent = "∫dy = -∫e^(-x) dx";
            block3Steps[2].querySelectorAll('.math-equation')[3].textContent = "y = e^(-x) + K";
            
            let block4Steps = blocks[3].querySelectorAll('.solution-step');
            block4Steps[0].querySelector('.math-equation').textContent = "y = e^x + C";
            block4Steps[1].querySelector('.math-equation').textContent = "y = e^(-x) + K";
        }
        
        function updateHyperbolaSolution(blocks, equation) {
            let block2Steps = blocks[1].querySelectorAll('.solution-step');
            block2Steps[0].querySelector('.math-equation').textContent = "Differentiate: dy/dx = -1/x^2";
            block2Steps[1].querySelector('.math-equation').textContent = "The differential equation is: dy/dx = -1/x^2";
            block2Steps[2].querySelector('.math-equation').textContent = "General solution: y = 1/x + C";
            
            let block3Steps = blocks[2].querySelectorAll('.solution-step');
            block3Steps[0].querySelector('.math-equation').textContent = "m_original = dy/dx = -1/x^2";
            block3Steps[1].querySelector('.math-equation').textContent = "m_orthogonal = x^2";
            block3Steps[2].querySelectorAll('.math-equation')[0].textContent = "dy/dx = x^2";
            block3Steps[2].querySelectorAll('.math-equation')[1].textContent = "dy = x^2 dx";
            block3Steps[2].querySelectorAll('.math-equation')[2].textContent = "∫dy = ∫x^2 dx";
            block3Steps[2].querySelectorAll('.math-equation')[3].textContent = "y = x^3/3 + K";
            
            let block4Steps = blocks[3].querySelectorAll('.solution-step');
            block4Steps[0].querySelector('.math-equation').textContent = "y = 1/x + C";
            block4Steps[1].querySelector('.math-equation').textContent = "y = x^3/3 + K";
        }
        
        function updateEllipseSolution(blocks, equation) {
            let block2Steps = blocks[1].querySelectorAll('.solution-step');
            block2Steps[0].querySelector('.math-equation').textContent = "Differentiate implicitly: (2x/9) + (2y/4)(dy/dx) = 0";
            block2Steps[1].querySelector('.math-equation').textContent = "Solve for dy/dx: dy/dx = -(4x)/(9y)";
            block2Steps[2].querySelector('.math-equation').textContent = "Family of ellipses: x^2/9 + y^2/4 = C";
            
            let block3Steps = blocks[2].querySelectorAll('.solution-step');
            block3Steps[0].querySelector('.math-equation').textContent = "m_original = dy/dx = -(4x)/(9y)";
            block3Steps[1].querySelector('.math-equation').textContent = "m_orthogonal = (9y)/(4x)";
            block3Steps[2].querySelectorAll('.math-equation')[0].textContent = "dy/dx = (9y)/(4x)";
            block3Steps[2].querySelectorAll('.math-equation')[1].textContent = "dy/y = (9/4) dx/x";
            block3Steps[2].querySelectorAll('.math-equation')[2].textContent = "∫dy/y = (9/4) ∫dx/x";
            block3Steps[2].querySelectorAll('.math-equation')[3].textContent = "ln|y| = (9/4) ln|x| + K";
            
            let block4Steps = blocks[3].querySelectorAll('.solution-step');
            block4Steps[0].querySelector('.math-equation').textContent = "x^2/9 + y^2/4 = C";
            block4Steps[1].querySelector('.math-equation').textContent = "y = K * x^(9/4)";
        }
        
        // Generate graphs
        function generateGraphs(equation) {
            // Original curve data
            let originalTrace = {
                x: [],
                y: [],
                mode: 'lines',
                name: 'Original Curves',
                line: { color: '#4b6cb7', width: 3 }
            };
            
            // Orthogonal trajectory data
            let orthogonalTrace = {
                x: [],
                y: [],
                mode: 'lines',
                name: 'Orthogonal Trajectories',
                line: { color: '#ff6b6b', width: 3 }
            };
            
            // Generate data based on equation type
            if (equation.includes('x^2 + y^2') || equation.includes('r^2')) {
                // Circle and lines through origin
                for (let c = 1; c <= 3; c++) {
                    let xValues = [];
                    let yValues = [];
                    for (let i = -Math.sqrt(c*5); i <= Math.sqrt(c*5); i += 0.1) {
                        xValues.push(i);
                        yValues.push(Math.sqrt(Math.max(0, c*5 - i*i)));
                    }
                    for (let i = Math.sqrt(c*5); i >= -Math.sqrt(c*5); i -= 0.1) {
                        xValues.push(i);
                        yValues.push(-Math.sqrt(Math.max(0, c*5 - i*i)));
                    }
                    
                    if (c === 1) {
                        originalTrace.x = xValues;
                        originalTrace.y = yValues;
                    } else {
                        originalTrace.x = originalTrace.x.concat(xValues);
                        originalTrace.y = originalTrace.y.concat(yValues);
                    }
                }
                
                // Orthogonal trajectories: lines through origin
                for (let k = -2; k <= 2; k += 0.5) {
                    if (k === 0) continue;
                    for (let i = -4; i <= 4; i += 0.2) {
                        orthogonalTrace.x.push(i);
                        orthogonalTrace.y.push(k*i);
                    }
                }
                
            } else if (equation.includes('sin') || equation.includes('cos')) {
                // Sine and -ln|sec+tan|
                for (let c = -1; c <= 1; c += 0.5) {
                    for (let i = -5; i <= 5; i += 0.1) {
                        if (c === -1) {
                            originalTrace.x.push(i);
                            originalTrace.y.push(Math.sin(i) + c);
                            
                            orthogonalTrace.x.push(i);
                            let val = -Math.log(Math.abs(1/Math.cos(i) + Math.tan(i))) + c;
                            orthogonalTrace.y.push(isFinite(val) ? val : 0);
                        } else {
                            // For multiple curves in the family
                            originalTrace.x.push(i);
                            originalTrace.y.push(Math.sin(i) + c);
                        }
                    }
                }
                
            } else if (equation.includes('e^') || equation.includes('exp')) {
                // Exponential and negative exponential
                for (let c = -1; c <= 1; c += 0.5) {
                    for (let i = -2; i <= 2; i += 0.1) {
                        if (c === -1) {
                            originalTrace.x.push(i);
                            originalTrace.y.push(Math.exp(i) + c);
                            
                            orthogonalTrace.x.push(i);
                            orthogonalTrace.y.push(Math.exp(-i) + c);
                        } else {
                            originalTrace.x.push(i);
                            originalTrace.y.push(Math.exp(i) + c);
                        }
                    }
                }
                
            } else if (equation.includes('1/x')) {
                // Hyperbola and cubic
                for (let c = -2; c <= 2; c += 0.5) {
                    if (c === 0) continue;
                    for (let i = 0.2; i <= 3; i += 0.1) {
                        if (c === 1) {
                            originalTrace.x.push(i);
                            originalTrace.y.push(1/i + c);
                            
                            orthogonalTrace.x.push(i);
                            orthogonalTrace.y.push(Math.pow(i, 3)/3 + c);
                        } else {
                            originalTrace.x.push(i);
                            originalTrace.y.push(1/i + c);
                        }
                    }
                    for (let i = -3; i <= -0.2; i += 0.1) {
                        if (c === 1) {
                            originalTrace.x.push(i);
                            originalTrace.y.push(1/i + c);
                            
                            orthogonalTrace.x.push(i);
                            orthogonalTrace.y.push(Math.pow(i, 3)/3 + c);
                        } else {
                            originalTrace.x.push(i);
                            originalTrace.y.push(1/i + c);
                        }
                    }
                }
                
            } else {
                // Default parabola and logarithmic
                for (let c = -2; c <= 2; c += 0.5) {
                    for (let i = -3; i <= 3; i += 0.1) {
                        if (c === 0) {
                            originalTrace.x.push(i);
                            originalTrace.y.push(i*i + c);
                            
                            orthogonalTrace.x.push(i > 0 ? i : -i);
                            orthogonalTrace.y.push(-0.5 * Math.log(Math.abs(i)) + c);
                        } else {
                            originalTrace.x.push(i);
                            originalTrace.y.push(i*i + c);
                        }
                    }
                }
            }
            
            // Layout for original graph
            const originalLayout = {
                title: 'Family of Curves',
                xaxis: { 
                    title: 'x', 
                    gridcolor: '#eee', 
                    zerolinecolor: '#ccc',
                    showgrid: true
                },
                yaxis: { 
                    title: 'y', 
                    gridcolor: '#eee', 
                    zerolinecolor: '#ccc',
                    showgrid: true
                },
                plot_bgcolor: '#fdfdfd',
                paper_bgcolor: '#fdfdfd',
                showlegend: true,
                legend: { x: 0, y: 1.1, orientation: 'h' },
                margin: { t: 50, b: 50, l: 50, r: 50 }
            };
            
            // Layout for orthogonal graph
            const orthogonalLayout = {
                title: 'Orthogonal Trajectories',
                xaxis: { 
                    title: 'x', 
                    gridcolor: '#eee', 
                    zerolinecolor: '#ccc',
                    showgrid: true
                },
                yaxis: { 
                    title: 'y', 
                    gridcolor: '#eee', 
                    zerolinecolor: '#ccc',
                    showgrid: true
                },
                plot_bgcolor: '#fdfdfd',
                paper_bgcolor: '#fdfdfd',
                showlegend: true,
                legend: { x: 0, y: 1.1, orientation: 'h' },
                margin: { t: 50, b: 50, l: 50, r: 50 }
            };
            
            // Plot graphs
            Plotly.newPlot('originalGraph', [originalTrace], originalLayout);
            Plotly.newPlot('orthogonalGraph', [orthogonalTrace], orthogonalLayout);
        }
        
        // Initialize with example
        generateSolution(exampleEquations[0]);
        generateGraphs(exampleEquations[0]);
        
        // Show feedback modal when trying to leave the site
        window.addEventListener('beforeunload', function(e) {
            // This would normally show the feedback modal
            // For demonstration, we're not preventing the user from leaving
            // but in a real implementation, you would use this to show the modal
        });
        
        // Handle equation input examples
        equationInput.addEventListener('click', function() {
            if (this.value === exampleEquations[0]) {
                this.select();
            }
        });
        
        // Add some example buttons
        const exampleContainer = document.createElement('div');
        exampleContainer.style.marginTop = '1rem';
        exampleContainer.innerHTML = `
            <p style="font-weight: 600; margin-bottom: 0.5rem;">Try these examples:</p>
            <div style="display: flex; flex-wrap: wrap; gap: 0.5rem;">
                ${exampleEquations.map(eq => 
                    `<button class="example-btn" style="padding: 0.5rem 0.8rem; background: #e0e7ff; border: 1px solid #a5b4fc; border-radius: 4px; cursor: pointer;">${eq}</button>`
                ).join('')}
            </div>
        `;
        
        equationInput.parentNode.appendChild(exampleContainer);
        
        // Add event listeners to example buttons
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('example-btn')) {
                equationInput.value = e.target.textContent;
            }
        });
    </script>
</body>
</html>
