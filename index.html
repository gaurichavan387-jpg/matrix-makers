<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OrthoMath - Your Home for Math Help</title>
    <style>
        /* Reset and Base Styles */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: white;
            color: black;
            line-height: 1.6;
        }

        /* Header Styles */
        header {
            background: linear-gradient(135deg, #4a6fa5, #2c3e50);
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .header-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            text-align: left;
        }

        .logo h1 {
            color: black;
            font-size: 2rem;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(255,255,255,0.3);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: white;
            text-decoration: none;
            padding: 0.5rem 1rem;
            border-radius: 5px;
            transition: all 0.3s;
            font-weight: 500;
        }

        .nav-link:hover {
            background-color: rgba(255,255,255,0.1);
            transform: translateY(-2px);
        }

        #contactBtn {
            background-color: #e74c3c;
            color: white;
        }

        #contactBtn:hover {
            background-color: #c0392b;
        }

        /* Hero Section */
        .hero {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 0 20px;
        }

        .hero-content {
            display: flex;
            gap: 3rem;
            align-items: center;
            background: white;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .hero-text {
            flex: 1;
            padding: 3rem;
        }

        .hero-text h2 {
            font-size: 2.5rem;
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        .hero-text p {
            font-size: 1.2rem;
            color: #34495e;
            margin-bottom: 2rem;
        }

        .hero-image {
            flex: 1;
            position: relative;
            overflow: hidden;
            min-height: 500px;
        }

        .hero-image::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(74, 111, 165, 0.9), rgba(41, 128, 185, 0.9));
            z-index: 1;
        }

        .math-collaboration {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
            padding: 2rem;
        }

        .math-equations {
            background: rgba(255, 255, 255, 0.95);
            padding: 2rem;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            text-align: center;
        }

        .equation {
            font-size: 1.8rem;
            margin: 1rem 0;
            color: #2c3e50;
            font-weight: bold;
        }

        .graph-preview {
            width: 100%;
            height: 200px;
            margin-top: 2rem;
            position: relative;
        }

        /* Calculator Section */
        .calculator-section {
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 20px;
        }

        .calculator-container {
            background: white;
            padding: 2.5rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .input-group {
            margin-bottom: 1.5rem;
        }

        .input-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #2c3e50;
            font-weight: 600;
        }

        #equation {
            width: 100%;
            padding: 1rem;
            font-size: 1.2rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 1rem;
            transition: border-color 0.3s;
        }

        #equation:focus {
            outline: none;
            border-color: #4a6fa5;
        }

        .variables-container {
            background: #f8f9fa;
            padding: 1.5rem;
            border-radius: 10px;
            margin-bottom: 2rem;
        }

        .variable-row {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            align-items: center;
        }

        .variable-input {
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            width: 100px;
        }

        .range-input {
            flex: 1;
            padding: 0.5rem;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .btn {
            padding: 0.8rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .primary-btn {
            background: linear-gradient(135deg, #4a6fa5, #2c3e50);
            color: white;
        }

        .primary-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(74, 111, 165, 0.3);
        }

        .secondary-btn {
            background: #ecf0f1;
            color: #2c3e50;
        }

        .secondary-btn:hover {
            background: #bdc3c7;
        }

        .add-btn {
            background: #27ae60;
            color: white;
            padding: 0.5rem 1rem;
        }

        .remove-btn {
            background: #e74c3c;
            color: white;
            padding: 0.5rem 1rem;
        }

        /* Results Section */
        .results-section {
            max-width: 1200px;
            margin: 3rem auto;
            padding: 0 20px;
            display: none;
        }

        .back-home {
            margin-bottom: 2rem;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .result-block {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 3px 15px rgba(0,0,0,0.1);
            border-left: 5px solid #4a6fa5;
        }

        .result-block h3 {
            color: #2c3e50;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #eee;
        }

        .step {
            margin-bottom: 1rem;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .step h4 {
            color: #34495e;
            margin-bottom: 0.5rem;
        }

        /* Graphs Section */
        .graphs-section {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .graphs-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-top: 1rem;
        }

        .graph-box {
            background: white;
            padding: 1.5rem;
            border-radius: 10px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
        }

        .graph-box h3 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 1rem;
        }

        canvas {
            width: 100% !important;
            height: 300px !important;
            border-radius: 5px;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 2000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: white;
            padding: 2.5rem;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.2);
        }

        .modal h2 {
            color: #2c3e50;
            margin-bottom: 1.5rem;
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #34495e;
            font-weight: 500;
        }

        .form-group input,
        .form-group textarea,
        .form-group select {
            width: 100%;
            padding: 0.8rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: border-color 0.3s;
        }

        .form-group input:focus,
        .form-group textarea:focus {
            outline: none;
            border-color: #4a6fa5;
        }

        .stars {
            display: flex;
            gap: 0.5rem;
            margin: 1rem 0;
        }

        .star {
            font-size: 2rem;
            color: #ddd;
            cursor: pointer;
            transition: color 0.3s;
        }

        .star:hover,
        .star.active {
            color: #ffd700;
        }

        .btn-group {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
        }

        .submit-btn {
            background: #27ae60;
            color: white;
            flex: 1;
        }

        .cancel-btn {
            background: #95a5a6;
            color: white;
            flex: 1;
        }

        .submit-btn:hover {
            background: #219653;
        }

        .cancel-btn:hover {
            background: #7f8c8d;
        }

        /* Exit Detection */
        body.exit-warning::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1999;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero-content {
                flex-direction: column;
            }
            
            .hero-text {
                padding: 2rem;
            }
            
            .results-grid {
                grid-template-columns: 1fr;
            }
            
            .graphs-container {
                grid-template-columns: 1fr;
            }
            
            .header-container {
                flex-direction: column;
                gap: 1rem;
            }
            
            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }
        }

        /* Math Equation Styling */
        .math-equation {
            font-family: "Cambria Math", "Latin Modern Math", serif;
            font-size: 1.2rem;
            padding: 0.5rem;
            background: #f8f9fa;
            border-radius: 5px;
            margin: 0.5rem 0;
        }

        .final-answer {
            background: #e8f4f8;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #3498db;
            margin-top: 1rem;
        }
    </style>
</head>
<body>
    <!-- Exit Feedback Modal -->
    <div id="exitModal" class="modal">
        <div class="modal-content">
            <h2>We Value Your Feedback!</h2>
            <p>Please share your feedback before leaving. Your feedback helps us improve.</p>
            <form id="feedbackForm">
                <div class="form-group">
                    <label>How would you rate your experience?</label>
                    <div class="stars">
                        <span class="star" data-value="1">★</span>
                        <span class="star" data-value="2">★</span>
                        <span class="star" data-value="3">★</span>
                        <span class="star" data-value="4">★</span>
                        <span class="star" data-value="5">★</span>
                    </div>
                    <input type="hidden" id="rating" name="rating" value="0">
                </div>
                <div class="form-group">
                    <label for="feedback">Your Feedback:</label>
                    <textarea id="feedback" name="feedback" rows="4" placeholder="Please share your thoughts..." required></textarea>
                </div>
                <div class="form-group">
                    <label for="suggestion">Suggestions for Improvement:</label>
                    <textarea id="suggestion" name="suggestion" rows="3" placeholder="Any features you'd like to see?"></textarea>
                </div>
                <div class="btn-group">
                    <button type="submit" class="btn submit-btn">Submit Feedback</button>
                    <button type="button" class="btn cancel-btn" id="cancelFeedback">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Contact Modal -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <h2>Contact Us</h2>
            <form id="contactForm">
                <div class="form-group">
                    <label for="contactName">Full Name:</label>
                    <input type="text" id="contactName" name="name" required placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label for="contactEmail">Email Address:</label>
                    <input type="email" id="contactEmail" name="email" required placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label for="contactSubject">Subject:</label>
                    <select id="contactSubject" name="subject" required>
                        <option value="">Select a subject</option>
                        <option value="support">Technical Support</option>
                        <option value="feature">Feature Request</option>
                        <option value="bug">Report a Bug</option>
                        <option value="general">General Inquiry</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="contactMessage">Message:</label>
                    <textarea id="contactMessage" name="message" rows="5" required placeholder="How can we help you?"></textarea>
                </div>
                <div class="btn-group">
                    <button type="submit" class="btn submit-btn">Send Message</button>
                    <button type="button" class="btn cancel-btn" id="cancelContact">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Header -->
    <header>
        <div class="header-container">
            <div class="logo">
                <h1>Your Home for Your Help</h1>
            </div>
            <nav class="nav-links">
                <a href="#home" class="nav-link">Home</a>
                <a href="#calculator" class="nav-link">Calculator</a>
                
                <button id="contactBtn" class="nav-link">Contact Us</button>
            </nav>
        </div>
    </header>

    <!-- Hero Section -->
    <section id="home" class="hero">
        <div class="hero-content">
            <div class="hero-text">
                <h2>Master Orthogonal Trajectories</h2>
                <p>Visualize mathematical equations and find their orthogonal families with step-by-step solutions, interactive graphs, and comprehensive analysis.</p>
                <div class="math-equation">
                    For family of curves: f(x, y) = c<br>
                    Orthogonal trajectories satisfy: dy/dx = -1/(dy/dx)ₒᵣᵢ
                </div>
                <button onclick="scrollToCalculator()" class="btn primary-btn">Start Calculating</button>
            </div>
            <div class="hero-image">
                <div class="math-collaboration">
                    <div class="math-equations">
                        <div class="equation">x² + y² = c</div>
                        <div class="equation">y = mx + b</div>
                        <div class="equation">dy/dx = -x/y</div>
                        <div class="graph-preview">
                            <canvas id="previewGraph"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Calculator Section -->
    <section id="calculator" class="calculator-section">
        <div class="calculator-container">
            <h2 style="color: #2c3e50; margin-bottom: 1.5rem;">Orthogonal Trajectory Calculator</h2>
            <div class="input-group">
                <label for="equation">Enter Mathematical Equation:</label>
                <input type="text" id="equation" placeholder="e.g., x^2 + y^2 = c, y = mx + b, sin(x) + cos(y) = k">
            </div>
            
            <div class="variables-container">
                <h4 style="color: #2c3e50; margin-bottom: 1rem;">Define Variables</h4>
                <div id="variablesList">
                    <div class="variable-row">
                        <input type="text" class="variable-input" placeholder="x" value="x">
                        <input type="text" class="range-input" placeholder="Range: -10 to 10" value="-10,10">
                        <button class="btn remove-btn" onclick="removeVariable(this)">Remove</button>
                    </div>
                    <div class="variable-row">
                        <input type="text" class="variable-input" placeholder="y" value="y">
                        
                        <button class="btn remove-btn" onclick="removeVariable(this)">Remove</button>
                    </div>
                </div>
                <button onclick="addVariable()" class="btn add-btn" style="margin-top: 1rem;">+ Add Variable</button>
            </div>
            
            <button onclick="calculate()" class="btn primary-btn" style="width: 100%; padding: 1rem; font-size: 1.1rem;">
                Calculate Orthogonal Trajectories
            </button>
        </div>
    </section>

    <!-- Results Section -->
    <section id="results" class="results-section">
        <div class="back-home">
            <button onclick="goBackHome()" class="btn secondary-btn">← Back to Home</button>
        </div>
        
        <div class="results-grid">
            <!-- Block 1: Original Equation -->
            <div class="result-block">
                <h3>Original Equation</h3>
                <div id="block1" class="block-content">
                    <div class="math-equation">Family of curves: <span id="originalEquationDisplay">x² + y² = c</span></div>
                    <p>Parameters: c is constant</p>
                </div>
            </div>

            <!-- Block 2: Differential Equation Solution -->
            <div class="result-block">
                <h3>Step-by-Step Solution</h3>
                <div id="block2" class="block-content">
                    <div class="step">
                        <h4>Step 1: Differentiate the equation</h4>
                        <p>d/dx(x² + y²) = d/dx(c)</p>
                        <p>2x + 2y(dy/dx) = 0</p>
                    </div>
                    <div class="step">
                        <h4>Step 2: Solve for dy/dx</h4>
                        <p>2y(dy/dx) = -2x</p>
                        <p>dy/dx = -x/y</p>
                    </div>
                    <div class="step">
                        <h4>Step 3: General Solution</h4>
                        <p>Family of circles centered at origin</p>
                        <p>General form: x² + y² = c, where c > 0</p>
                    </div>
                </div>
            </div>

            <!-- Block 3: Orthogonal Trajectory Calculation -->
            <div class="result-block">
                <h3>Orthogonal Trajectory Calculation</h3>
                <div id="block3" class="block-content">
                    <div class="step">
                        <h4>Step 1: Find orthogonal slope</h4>
                        <p>Original slope: m₁ = -x/y</p>
                        <p>Orthogonal slope: m₂ = -1/m₁</p>
                        <p>m₂ = -1/(-x/y) = y/x</p>
                    </div>
                    <div class="step">
                        <h4>Step 2: Solve orthogonal DE</h4>
                        <p>dy/dx = y/x</p>
                        <p>∫(dy/y) = ∫(dx/x)</p>
                        <p>ln|y| = ln|x| + ln|k|</p>
                        <p>y = kx</p>
                    </div>
                </div>
            </div>

            <!-- Block 4: Final Answers -->
            <div class="result-block">
                <h3>Final Equations</h3>
                <div id="block4" class="block-content">
                    <div class="final-answer">
                        <h4>Original Family:</h4>
                        <p class="math-equation">x² + y² = c</p>
                        <p>where c > 0 (family of circles)</p>
                    </div>
                    <div class="final-answer">
                        <h4>Orthogonal Trajectories:</h4>
                        <p class="math-equation">y = kx</p>
                        <p>where k ∈ ℝ (family of lines through origin)</p>
                        <p>These lines intersect the circles at right angles</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Graphs Section -->
        <div class="graphs-section">
            <h2 style="color: #2c3e50; text-align: center; margin-bottom: 1.5rem;">Graphical Visualization</h2>
            <div class="graphs-container">
                <div class="graph-box">
                    <h3>Original Equation: Family of Circles</h3>
                    <canvas id="originalGraph"></canvas>
                </div>
                <div class="graph-box">
                    <h3>Orthogonal Trajectories: Lines through Origin</h3>
                    <canvas id="orthogonalGraph"></canvas>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer style="background: #2c3e50; color: white; text-align: center; padding: 2rem; margin-top: 3rem;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <p>&copy; 2024 OrthoMath - Your Home for Your Help. All rights reserved.</p>
            <p style="margin-top: 1rem; opacity: 0.8;">Master mathematics with interactive tools and visualizations</p>
        </div>
    </footer>

    <script>
        // DOM Elements
        const exitModal = document.getElementById('exitModal');
        const contactModal = document.getElementById('contactModal');
        const feedbackForm = document.getElementById('feedbackForm');
        const contactForm = document.getElementById('contactForm');
        const resultsSection = document.getElementById('results');
        
        // Exit detection
        let isLeaving = false;
        let feedbackSubmitted = false;
        
        // Track mouse movement towards exit
        document.addEventListener('mouseleave', function(e) {
            if (e.clientY <= 0 && !feedbackSubmitted && !isLeaving) {
                isLeaving = true;
                document.body.classList.add('exit-warning');
                exitModal.style.display = 'flex';
            }
        });
        
        // Star rating
        document.querySelectorAll('.star').forEach(star => {
            star.addEventListener('click', function() {
                const value = this.dataset.value;
                document.getElementById('rating').value = value;
                
                // Update star display
                document.querySelectorAll('.star').forEach(s => {
                    s.classList.toggle('active', s.dataset.value <= value);
                });
            });
        });
        
        // Cancel feedback
        document.getElementById('cancelFeedback').addEventListener('click', function() {
            exitModal.style.display = 'none';
            document.body.classList.remove('exit-warning');
            isLeaving = false;
        });
        
        // Submit feedback
        feedbackForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const rating = document.getElementById('rating').value;
            const feedback = document.getElementById('feedback').value;
            
            if (rating === '0') {
                alert('Please provide a rating');
                return;
            }
            
            // In a real application, send this to a server
            console.log('Feedback submitted:', { rating, feedback });
            alert('Thank you for your feedback!');
            
            feedbackSubmitted = true;
            exitModal.style.display = 'none';
            document.body.classList.remove('exit-warning');
            isLeaving = false;
        });
        
        // Contact form
        document.getElementById('contactBtn').addEventListener('click', function() {
            contactModal.style.display = 'flex';
        });
        
        document.getElementById('cancelContact').addEventListener('click', function() {
            contactModal.style.display = 'none';
        });
        
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const subject = document.getElementById('contactSubject').value;
            const message = document.getElementById('contactMessage').value;
            
            // In a real application, send this to a server
            console.log('Contact form submitted:', { name, email, subject, message });
            alert('Thank you for contacting us! We will get back to you soon.');
            
            contactModal.style.display = 'none';
            contactForm.reset();
        });
        
        // Calculator Functions
        function scrollToCalculator() {
            document.getElementById('calculator').scrollIntoView({ behavior: 'smooth' });
        }
        
        function addVariable() {
            const variablesList = document.getElementById('variablesList');
            const newVariable = document.createElement('div');
            newVariable.className = 'variable-row';
            newVariable.innerHTML = `
                <input type="text" class="variable-input" placeholder="var">
                <input type="text" class="range-input" placeholder="Range: min,max">
                <button class="btn remove-btn" onclick="removeVariable(this)">Remove</button>
            `;
            variablesList.appendChild(newVariable);
        }
        
        function removeVariable(button) {
            button.closest('.variable-row').remove();
        }
        
        function calculate() {
            const equation = document.getElementById('equation').value.trim();
            if (!equation) {
                alert('Please enter an equation');
                return;
            }
            
            // Update displayed equation
            document.getElementById('originalEquationDisplay').textContent = equation;
            
            // Show results section
            resultsSection.style.display = 'block';
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            
            // Generate graphs
            generateGraphs(equation);
            
            // Update solution based on equation type
            updateSolution(equation);
        }
        
        function goBackHome() {
            resultsSection.style.display = 'none';
            document.getElementById('home').scrollIntoView({ behavior: 'smooth' });
        }
        
        function generateGraphs(equation) {
            // Original equation graph (Family of circles)
            const originalCtx = document.getElementById('originalGraph').getContext('2d');
            if (window.originalChart) {
                window.originalChart.destroy();
            }
            
            window.originalChart = new Chart(originalCtx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'x² + y² = c',
                        data: generateCircleData(1),
                        borderColor: '#4a6fa5',
                        backgroundColor: 'rgba(74, 111, 165, 0.1)',
                        borderWidth: 2,
                        pointRadius: 0,
                        showLine: true,
                        fill: false
                    }, {
                        label: 'x² + y² = 4',
                        data: generateCircleData(2),
                        borderColor: '#27ae60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderWidth: 2,
                        pointRadius: 0,
                        showLine: true,
                        fill: false
                    }, {
                        label: 'x² + y² = 9',
                        data: generateCircleData(3),
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        pointRadius: 0,
                        showLine: true,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            min: -10,
                            max: 10,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y: {
                            min: -10,
                            max: 10,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });
            
            // Orthogonal trajectories graph (Lines through origin)
            const orthogonalCtx = document.getElementById('orthogonalGraph').getContext('2d');
            if (window.orthogonalChart) {
                window.orthogonalChart.destroy();
            }
            
            window.orthogonalChart = new Chart(orthogonalCtx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'y = x',
                        data: generateLineData(1),
                        borderColor: '#4a6fa5',
                        backgroundColor: 'rgba(74, 111, 165, 0.1)',
                        borderWidth: 2,
                        pointRadius: 0,
                        showLine: true,
                        fill: false
                    }, {
                        label: 'y = 2x',
                        data: generateLineData(2),
                        borderColor: '#27ae60',
                        backgroundColor: 'rgba(39, 174, 96, 0.1)',
                        borderWidth: 2,
                        pointRadius: 0,
                        showLine: true,
                        fill: false
                    }, {
                        label: 'y = 0.5x',
                        data: generateLineData(0.5),
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        borderWidth: 2,
                        pointRadius: 0,
                        showLine: true,
                        fill: false
                    }, {
                        label: 'y = -x',
                        data: generateLineData(-1),
                        borderColor: '#9b59b6',
                        backgroundColor: 'rgba(155, 89, 182, 0.1)',
                        borderWidth: 2,
                        pointRadius: 0,
                        showLine: true,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            min: -10,
                            max: 10,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        },
                        y: {
                            min: -10,
                            max: 10,
                            grid: {
                                color: 'rgba(0,0,0,0.1)'
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                            labels: {
                                font: {
                                    size: 12
                                }
                            }
                        }
                    }
                }
            });
            
            // Preview graph
            const previewCtx = document.getElementById('previewGraph').getContext('2d');
            new Chart(previewCtx, {
                type: 'scatter',
                data: {
                    datasets: [{
                        label: 'Preview',
                        data: generateCircleData(1.5),
                        borderColor: '#3498db',
                        backgroundColor: 'rgba(52, 152, 219, 0.1)',
                        borderWidth: 3,
                        pointRadius: 0,
                        showLine: true,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    scales: {
                        x: {
                            display: false
                        },
                        y: {
                            display: false
                        }
                    }
                }
            });
        }
        
        function generateCircleData(radius) {
            const data = [];
            for (let t = 0; t <= 2 * Math.PI; t += 0.1) {
                data.push({
                    x: radius * Math.cos(t),
                    y: radius * Math.sin(t)
                });
            }
            return data;
        }
        
        function generateLineData(slope) {
            const data = [];
            for (let x = -10; x <= 10; x += 0.5) {
                data.push({
                    x: x,
                    y: slope * x
                });
            }
            return data;
        }
        
        function updateSolution(equation) {
            // This is a simplified solution generator
            // In a real application, you would use a math library to parse and solve the equation
            
            let solution = '';
            
            if (equation.includes('^2') && equation.includes('y')) {
                // Circle equation
                solution = `For ${equation}, the orthogonal trajectories are straight lines through the origin.`;
            } else if (equation.includes('=') && equation.includes('x') && equation.includes('y')) {
                // Linear equation
                solution = `For ${equation}, the orthogonal trajectories are perpendicular lines.`;
            } else {
                solution = `Solving ${equation}... The orthogonal trajectories are calculated by taking the negative reciprocal of the original slope.`;
            }
            
            // Update solution text in block 2
            const block2 = document.getElementById('block2');
            // You can update the solution details here
        }
        
        // Initialize preview graph on load
        document.addEventListener('DOMContentLoaded', function() {
            generateGraphs('x^2 + y^2 = c');
        });
    </script>
</body>
</html>
